% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tef_glm.R
\name{tef_glm}
\alias{tef_glm}
\title{Generalized linear model with nonlinear time predictor}
\usage{
tef_glm(formIn, datIn, timeVar, family = gaussian, fixRate = NA)
}
\arguments{
\item{formIn}{model formula, as in glm()}

\item{datIn}{model data, as in glm()}

\item{timeVar}{String. Indicates which model predictor is time (i.e., should be transformed)}

\item{family}{passed to glm()}

\item{fixRate}{If numeric, use this as a rate parameter [50% time constant] rather than estimating it (e.g., to improve reproducibility)}
}
\description{
Fit a generalized linear model with time as a covariate,
while estimating the shape of the nonlinear interpolation between starting and ending time.
First resamples data with replacement 100 times, and each time estimates the best-shaped curve to interpolate
between initial time-related offset and asymptotic time (i.e., rate at which effect of time saturates at zero).
Then uses the median estimated rate to transform the \code{timeVar} predictor into an exponentially decaying variable
interpolating between initial time (time offset magnitude of 1) and arbitrarily large time values (time
offset magnitude 0). Last uses this transformed time variable in a \code{rlm} or \code{lm} model
}
\details{
Rate is parameterized as a time constant, or the amount of time it takes for half of change to occur.
The estimation of rate has a lower bound of
the .0333 quantile of the time variable (i.e., 7/8 of change happens in the first 10% of time) and an upper bound of the
.333 quantile of the time variable (i.e., 7/8 of change takes 100% of the time to happen). These bounds provide
some robustness in estimates of asympototic effects (i.e., "controlling for time") as well as initial effects
(i.e., "time-related starting offset").
}
\examples{
dat <- data.frame(trialNum = 1:200, resp = rbinom(200,1,log(11:210)/log(300)))
m_glm <- tef_glm(resp ~ trialNum,dat,'trialNum',family=binomial)
m_glm$rate # estimated half-of-change time constant

}
